import{N as _}from"./Net-CbKWFvYy.js";import{_ as V,A as c,c as u,w as i,r,o as n,d as m,h as S,i as F,F as x,f as h,e as A,a as y}from"./index-BTMlZ-hC.js";const C={data(){return{valid:!0,formData:{self_id:0,group_id:0},fields:[],field:{}}},methods:{async submitForm(){var e=await new _("/v1/group/function/edit").PostFormData(this.formData);e.isSuccess?(c.SetAlert(e.echo),this.$router.go(-1)):c.SetAlert(e.echo)},back(){this.$router.go(-1)},async getDetail(){var e=await new _("/v1/group/function/detail").Get();if(e.isSuccess){const o=e.data;for(const a in o){const s=o[a];this.fields.push({key:s.key,label:s.name,type:s.type,rules:[]}),this.field[s.key]=s.type}this.fillForm()}else c.SetAlert(e.echo)},async fillForm(){var e=await new _("/v1/group/function/get").PostFormData({self_id:this.$route.query.self_id,group_id:this.$route.query.group_id});if(e.isSuccess){let o=e.data;for(const a in o)switch(this.field[a]){case"bool":this.formData[a]=!!o[a];break;default:this.formData[a]=o[a];break}}else c.SetAlert(e.echo)}},created(){this.formData.self_id=this.$route.query.self_id,this.formData.group_id=this.$route.query.group_id,this.getDetail()}};function N(e,o,a,s,l,f){const v=r("v-textarea"),b=r("v-switch"),k=r("v-col"),g=r("v-row"),p=r("v-btn"),w=r("v-form"),D=r("v-container");return n(),u(D,null,{default:i(()=>[m(w,{modelValue:l.valid,"onUpdate:modelValue":o[0]||(o[0]=t=>l.valid=t),ref:"form",onSubmit:A(f.submitForm,["prevent"])},{default:i(()=>[m(g,null,{default:i(()=>[(n(!0),S(x,null,F(l.fields,t=>(n(),u(k,{key:t.key,cols:"12",md:"6"},{default:i(()=>[t.type==="string"?(n(),u(v,{key:0,"hide-details":"false",label:t.label,modelValue:l.formData[t.key],"onUpdate:modelValue":d=>l.formData[t.key]=d,rules:t.rules},null,8,["label","modelValue","onUpdate:modelValue","rules"])):y("",!0),t.type==="bool"?(n(),u(b,{key:1,inset:"",label:t.label,modelValue:l.formData[t.key],"onUpdate:modelValue":d=>l.formData[t.key]=d},null,8,["label","modelValue","onUpdate:modelValue"])):y("",!0)]),_:2},1024))),128))]),_:1}),m(p,{type:"submit",disabled:!l.valid,block:"",color:"primary",class:"mt-4"},{default:i(()=>[h("提交")]),_:1},8,["disabled"]),m(p,{block:"",color:"grey",class:"mt-4",onClick:f.back},{default:i(()=>[h("返回")]),_:1},8,["onClick"])]),_:1},8,["modelValue","onSubmit"])]),_:1})}const B=V(C,[["render",N]]);export{B as default};
