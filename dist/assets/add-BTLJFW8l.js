import{N as n}from"./Net-DoGrRJ2L.js";import{_ as p,c as V,y as t,o as c,v as e,a3 as _,z as d,ak as D,F as b,G as u,V as y}from"./index-D5RChKJd.js";import{V as f}from"./VContainer-CtLK66NM.js";import{V as k}from"./VForm-C5Vb8gCT.js";import{V as F,a as r}from"./VRow-cXHPaD9I.js";import{V as s}from"./VTextField-CnTQvUdV.js";import{V as h}from"./VSelect-Bdam0HV5.js";import"./TokenModel-epR9isAp.js";import"./index-D7NUcBGC.js";import"./VList-CjBwifb_.js";import"./VDivider-hyp4xJKF.js";import"./VVirtualScroll-B8tTxoa3.js";import"./VSlideGroup-ChQmK8CO.js";const T={data(){return{formData:{name:"",team_id:null,key:"",base_url:"",model:"",detail:0},teamList:[]}},methods:{async fetchTeamList(){try{const m=await new n("/v1/user/team/list").PostFormData();m.code===0?this.teamList=m.data.map(a=>({id:a.team_info.id,title:a.team_info.name})):console.error("Failed to fetch team list:",m.echo)}catch(m){console.error("Failed to fetch team list:",m)}},async addInfo(){try{const m={name:this.formData.name,team_id:parseInt(this.formData.team_id),key:this.formData.key,base_url:this.formData.base_url,model:this.formData.model,detail:parseInt(this.formData.detail)},a=await new n("/v1/fastgpt/info/add").PostFormData(m);a.code===0?this.goBack():console.error("Failed to add FastGPT info:",a.echo)}catch(m){console.error("Failed to add FastGPT info:",m)}},goBack(){this.$router.push("/v1/key?tab=fastgpt")}},async mounted(){this.fetchTeamList()}};function x(m,a,C,w,o,i){return c(),V(f,null,{default:t(()=>[e(y,null,{default:t(()=>[e(_,null,{default:t(()=>[d("添加 FastGPT 信息")]),_:1}),e(D,null,{default:t(()=>[e(k,{onSubmit:b(i.addInfo,["prevent"])},{default:t(()=>[e(f,null,{default:t(()=>[e(F,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(s,{modelValue:o.formData.name,"onUpdate:modelValue":a[0]||(a[0]=l=>o.formData.name=l),label:"名称"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(h,{modelValue:o.formData.team_id,"onUpdate:modelValue":a[1]||(a[1]=l=>o.formData.team_id=l),items:o.teamList,label:"选项","item-text":"title","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(s,{modelValue:o.formData.key,"onUpdate:modelValue":a[2]||(a[2]=l=>o.formData.key=l),label:"Key"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(s,{modelValue:o.formData.base_url,"onUpdate:modelValue":a[3]||(a[3]=l=>o.formData.base_url=l),label:"Base URL"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(s,{modelValue:o.formData.model,"onUpdate:modelValue":a[4]||(a[4]=l=>o.formData.model=l),label:"Model"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(s,{modelValue:o.formData.detail,"onUpdate:modelValue":a[5]||(a[5]=l=>o.formData.detail=l),label:"Detail"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{type:"submit",color:"primary",block:"",class:"mt-4"},{default:t(()=>[d("添加")]),_:1}),e(u,{onClick:i.goBack,color:"grey",block:"",class:"mt-4"},{default:t(()=>[d("返回")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const K=p(T,[["render",x]]);export{K as default};
