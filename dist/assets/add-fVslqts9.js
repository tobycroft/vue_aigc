import{N as m}from"./Net-B9Z0eCCv.js";import{_ as c,c as p,y as a,o as V,v as t,a3 as _,z as s,ak as h,F as k,G as f,V as D}from"./index-BJQz1I_A.js";import{V as u}from"./VContainer-D9L3iSw7.js";import{V as x}from"./VForm-CauLsvni.js";import{V as y,a as i}from"./VRow-CuQ-ON94.js";import{V as b}from"./VSelect-qHvIWgT0.js";import{V as n}from"./VTextField-CLRRpAU5.js";import"./TokenModel-epR9isAp.js";import"./VList-BmEjyFRU.js";import"./index-CY3xZy9q.js";import"./VDivider-DfLXtV5r.js";import"./VVirtualScroll-BWjNieis.js";import"./VSlideGroup-CUooAdZ-.js";const C={data(){return{teamList:[],team:this.$route.query,coinList:[],selectedCoinId:null,formData:{name:"测试key名称，随便起一个",team_id:"",prefix:"aigc",amount:"-1",from_id:"1"}}},methods:{async fetchTeamInfo(){const o=await new m("/v1/user/team/list").PostFormData();o.code===0?this.teamList=o.data.map(e=>({id:e.team_info.id,title:e.team_info.name})):console.error(o.echo)},async fetchCoinList(){try{const o=await new m("/v1/coin/info/list").PostFormData();o.code===0?this.coinList=o.data.map(e=>({id:e.id,title:e.name})):console.error("Failed to fetch coin list:",o.echo)}catch(o){console.error("Failed to fetch coin list:",o)}},async createToken(){try{const o={name:this.formData.name,team_id:this.formData.team_id,coin_id:this.selectedCoinId,prefix:this.formData.prefix,amount:this.formData.amount,from_id:this.formData.from_id},e=await new m("/v1/team/subtoken/create").PostFormData(o);e.code===0?this.goBack():console.error("Failed to create token:",e.echo)}catch(o){console.error("Failed to create token:",o)}},goBack(){this.$router.push({path:"/v1/team",query:{tab:"subtoken"}})}},mounted(){this.fetchTeamInfo(),this.fetchCoinList()}};function F(o,e,w,T,l,d){return V(),p(u,null,{default:a(()=>[t(D,null,{default:a(()=>[t(_,null,{default:a(()=>[s("添加团队 Token")]),_:1}),t(h,null,{default:a(()=>[t(x,{onSubmit:k(d.createToken,["prevent"])},{default:a(()=>[t(u,null,{default:a(()=>[t(y,null,{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(b,{modelValue:l.formData.team_id,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formData.team_id=r),items:l.teamList,label:"团队id","item-text":"title","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(n,{modelValue:l.formData.name,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formData.name=r),label:"key名称"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(n,{modelValue:l.formData.prefix,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formData.prefix=r),label:"密钥的prefix"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(n,{modelValue:l.formData.amount,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formData.amount=r),label:"可以使用的余额,如果是-1就是无线，大于0就按正常的扣"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(f,{type:"submit",color:"primary",block:"",class:"mt-4"},{default:a(()=>[s("添加")]),_:1}),t(f,{onClick:d.goBack,color:"grey",block:"",class:"mt-4"},{default:a(()=>[s("返回")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const R=c(C,[["render",F]]);export{R as default};
