import{T as p}from"./topheader-B6WmaKCa.js";import{v as f}from"./main-CeG-XbFa.js";import{T as d}from"./TokenModel-epR9isAp.js";import{_,X as S,v as e,y as t,Y as k,o as C,V as l,z as i,a2 as V,a3 as c,G as r,B as u}from"./index-632WDHQw.js";import{V as y}from"./VContainer-D3LjWDV0.js";import{V as T}from"./VTextField-B61ItG2a.js";import"./gobotq-3Wa2au3z.js";import"./index-DtdRwfjg.js";const R={name:"App",components:{Topheader:p,vrm:f},data(){return{message:"",uid:d.Api_find_uid(),token:d.Api_find_token(),width:screen.width,height:screen.height/3,currentState:"无状态",recognition:new webkitSpeechRecognition}},async mounted(){},methods:{updateMessage(){this.currentState="正在发声……",this.doAction("say",this.message)},chatMessage(){this.currentState="正在生成答案……",this.doAction("chat",this.message)},idle(){this.doAction("idle",this.message)},doAction(a,o){localStorage.setItem("doAction",JSON.stringify({type:a,text:o}))},startSpeechRecognition(a=!1){this.recognition.lang=["zh-CN"],this.currentState="语音识别中……",this.recognition.onresult=o=>{this.message=o.results[0][0].transcript,a&&this.chatMessage()},this.recognition.onerror=o=>{console.error("Speech recognition error:",o.error)},this.recognition.onend=()=>{this.currentState="语音识别完成",console.log("Speech recognition ended.")},this.recognition.start()},stopSpeechRecognition(){this.currentState="语音识别停止",this.recognition.stop()}}};function v(a,o,M,w,n,s){const h=u("Topheader"),g=u("vrm",!0);return C(),S(k,null,[e(h),e(y,null,{default:t(()=>[e(g,{height:n.height,width:n.width,uid:n.uid,token:n.token},null,8,["height","width","uid","token"]),e(l,null,{default:t(()=>[i("当前状态:"+V(n.currentState),1)]),_:1}),e(l,{class:"ma-2"},{default:t(()=>[e(c,null,{default:t(()=>[i("VRM智能展示")]),_:1}),e(T,{modelValue:n.message,"onUpdate:modelValue":o[0]||(o[0]=m=>n.message=m),label:"这里输入你想让VRM说的话"},null,8,["modelValue"]),e(r,{onClick:s.updateMessage,size:"large",color:"primary",class:"mt-4 ma-2"},{default:t(()=>[i("使用TTS生成语音")]),_:1},8,["onClick"]),e(r,{onClick:s.chatMessage,size:"large",type:"submit",color:"primary",class:"mt-4 ma-2"},{default:t(()=>[i("发送到GPT聊天")]),_:1},8,["onClick"]),e(r,{onClick:o[1]||(o[1]=m=>s.startSpeechRecognition(!0)),size:"large",type:"submit",color:"primary",class:"mt-4 ma-2"},{default:t(()=>[i("使用自动聊天")]),_:1})]),_:1}),e(l,{class:"ma-2"},{default:t(()=>[e(c,null,{default:t(()=>[i("VRM动作控制")]),_:1}),e(r,{onClick:s.idle,color:"green",class:"mt-4 ma-2"},{default:t(()=>[i("IDLE")]),_:1},8,["onClick"])]),_:1}),e(l,{class:"ma-2"},{default:t(()=>[e(c,null,{default:t(()=>[i("语音识别")]),_:1}),e(r,{color:"red",onClick:s.startSpeechRecognition,class:"ma-2"},{default:t(()=>[i("Start Recognition")]),_:1},8,["onClick"]),e(r,{color:"grey",onClick:s.stopSpeechRecognition,class:"ma-2"},{default:t(()=>[i("Stop Recognition")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}const E=_(R,[["render",v],["__scopeId","data-v-54ece655"]]);export{E as default};
