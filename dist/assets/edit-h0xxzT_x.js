import{N as i}from"./Net-DAICIKmx.js";import{_ as p,c,y as o,o as V,v as t,a3 as h,z as d,ap as D,F as _,G as n,V as y}from"./index-0QX2Zep0.js";import{V as u}from"./VContainer-MOY_plwv.js";import{V as b}from"./VForm-Dj44bIQR.js";import{V as F,a as s}from"./VRow-Dp24Y551.js";import{V as m}from"./VTextField-CCNIjjcF.js";import{V as k}from"./VSelect-VRvWD029.js";import"./TokenModel-epR9isAp.js";import"./index-e2v-vZhp.js";import"./VList-CdQ9_MkS.js";import"./VDivider-o8NvbJw8.js";import"./VVirtualScroll-eSKLqA-C.js";import"./VSlideGroup-BqqHKxz6.js";const T={data(){return{formData:{name:"",team_id:null,key:"",base_url:"",model:"",detail:0},teamList:[],fastGPTId:null}},methods:{async fetchTeamList(){try{const a=await new i("/v1/user/team/list").PostFormData();a.code===0?this.teamList=a.data.map(e=>({id:e.team_info.id,title:e.team_info.name})):console.error("Failed to fetch team list:",a.echo)}catch(a){console.error("Failed to fetch team list:",a)}},async fetchInfo(){try{const a=await new i("/v1/fastgpt/info/get").PostFormData({id:this.fastGPTId});if(a.code===0){const e=a.data;this.formData.name=e.name,this.formData.team_id=e.team_id,this.formData.key=e.key,this.formData.base_url=e.base_url,this.formData.model=e.model,this.formData.detail=e.detail}else console.error("Failed to fetch FastGPT info:",a.echo)}catch(a){console.error("Failed to fetch FastGPT info:",a)}},async updateInfo(){try{const a={id:this.fastGPTId,name:this.formData.name,team_id:parseInt(this.formData.team_id),key:this.formData.key,base_url:this.formData.base_url,model:this.formData.model,detail:parseInt(this.formData.detail)},e=await new i("/v1/fastgpt/info/update").PostFormData(a);e.code===0?this.goBack():console.error("Failed to update FastGPT info:",e.echo)}catch(a){console.error("Failed to update FastGPT info:",a)}},goBack(){this.$router.push("/v1/key?tab=fastgpt")}},mounted(){this.fetchTeamList(),this.fastGPTId=parseInt(this.$route.query.id),isNaN(this.fastGPTId)?console.error("Invalid FastGPT ID:",this.$route.query.id):this.fetchInfo()}};function I(a,e,P,G,l,f){return V(),c(u,null,{default:o(()=>[t(y,null,{default:o(()=>[t(h,null,{default:o(()=>[d("更新 FastGPT 信息")]),_:1}),t(D,null,{default:o(()=>[t(b,{onSubmit:_(f.updateInfo,["prevent"])},{default:o(()=>[t(u,null,{default:o(()=>[t(F,null,{default:o(()=>[t(s,{cols:"12"},{default:o(()=>[t(m,{modelValue:l.formData.name,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formData.name=r),label:"名称"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(k,{modelValue:l.formData.team_id,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formData.team_id=r),items:l.teamList,label:"选项","item-text":"title","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(m,{modelValue:l.formData.key,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formData.key=r),label:"Key"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(m,{modelValue:l.formData.base_url,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formData.base_url=r),label:"Base URL"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(m,{modelValue:l.formData.model,"onUpdate:modelValue":e[4]||(e[4]=r=>l.formData.model=r),label:"Model"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(m,{modelValue:l.formData.detail,"onUpdate:modelValue":e[5]||(e[5]=r=>l.formData.detail=r),label:"Detail"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(n,{type:"submit",color:"primary",block:"",class:"mt-4"},{default:o(()=>[d("更新")]),_:1}),t(n,{onClick:f.goBack,color:"grey",block:"",class:"mt-4"},{default:o(()=>[d("返回")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const z=p(T,[["render",I]]);export{z as default};
