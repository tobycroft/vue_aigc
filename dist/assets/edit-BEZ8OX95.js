import{N as f}from"./Net-irHV1lfX.js";import{_ as p,c as V,y as t,o as c,v as a,a4 as D,z as d,V as _,U as h,W as u,Q as y}from"./index-DjW7NOqq.js";import{V as n}from"./VContainer-sdUc0D8Q.js";import{V as b}from"./VForm-BBhm1lFz.js";import{V as k,a as s}from"./VRow-C1TyI6mj.js";import{V as m}from"./VTextField-r340cY97.js";import"./TokenModel-epR9isAp.js";import"./index--dg_NF4N.js";const I={data(){return{formData:{name:"",team_id:null,key:"",base_url:"",model:"",detail:0},fastGPTId:null}},methods:{async fetchInfo(){try{const r=await new f("/v1/fastgpt/info/get").PostFormData({id:this.fastGPTId});if(r.code===0){const e=r.data;this.formData.name=e.name,this.formData.team_id=e.team_id,this.formData.key=e.key,this.formData.base_url=e.base_url,this.formData.model=e.model,this.formData.detail=e.detail}else console.error("Failed to fetch FastGPT info:",r.echo)}catch(r){console.error("Failed to fetch FastGPT info:",r)}},async updateInfo(){try{const r={id:this.fastGPTId,name:this.formData.name,team_id:parseInt(this.formData.team_id),key:this.formData.key,base_url:this.formData.base_url,model:this.formData.model,detail:parseInt(this.formData.detail)},e=await new f("/v1/fastgpt/info/update").PostFormData(r);e.code===0?this.$router.push("/v1/fastgpt/info/list"):console.error("Failed to update FastGPT info:",e.echo)}catch(r){console.error("Failed to update FastGPT info:",r)}},goBack(){this.$router.push("/v1/key?tab=fastgpt")}},mounted(){this.fastGPTId=parseInt(this.$route.query.id),isNaN(this.fastGPTId)?console.error("Invalid FastGPT ID:",this.$route.query.id):this.fetchInfo()}};function T(r,e,F,P,o,i){return c(),V(n,null,{default:t(()=>[a(y,null,{default:t(()=>[a(D,null,{default:t(()=>[d("更新 FastGPT 信息")]),_:1}),a(_,null,{default:t(()=>[a(b,{onSubmit:h(i.updateInfo,["prevent"])},{default:t(()=>[a(n,null,{default:t(()=>[a(k,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.formData.name=l),label:"名称"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.team_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.formData.team_id=l),label:"团队 ID"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.key,"onUpdate:modelValue":e[2]||(e[2]=l=>o.formData.key=l),label:"Key"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.base_url,"onUpdate:modelValue":e[3]||(e[3]=l=>o.formData.base_url=l),label:"Base URL"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.model,"onUpdate:modelValue":e[4]||(e[4]=l=>o.formData.model=l),label:"Model"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(m,{modelValue:o.formData.detail,"onUpdate:modelValue":e[5]||(e[5]=l=>o.formData.detail=l),label:"Detail"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(u,{type:"submit",color:"primary",block:"",class:"mt-4"},{default:t(()=>[d("更新")]),_:1}),a(u,{onClick:i.goBack,color:"grey",block:"",class:"mt-4"},{default:t(()=>[d("返回")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const N=p(I,[["render",T]]);export{N as default};
